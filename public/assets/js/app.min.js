$(document).ready(function(){token=$("#token").val(),url="http://localhost:8000",max_page=$("#lastPage").val(),count=2,$(window).scroll(function(){if(1==$("#scroll").length&&$(window).scrollTop()==$(document).height()-$(window).height()){if(count>max_page)return!1;$("#loader").show(),$.ajax({method:"GET",headers:{"X-XSRF-TOKEN":token},url:url+"/?page="+count,dataType:"json",success:function(t){t.html&&($(".product:last").after(t.html),$("#loader").hide())}}),count++}}),$("#quantity-bloc").each(function(){$(this).change(function(){quantity=$(this).val(),price=$("#price").val(),total=quantity*price,$("#quantity-bloc").next("span").remove(),$(this).after('<span style="color: #008000; font-weight: bold;">Total: '+total+" €</span>")})}),$(".quantity").each(function(){$(this).change(function(){product_id=$(this).attr("productId"),quantity=$(this).val();var t="product_id="+product_id+"&quantity="+quantity;$.ajax({method:"POST",headers:{"X-XSRF-TOKEN":token},url:url+"/updateQuantity",datatype:"json",data:t,success:function(t){$(".total_price"+product_id).text(t.price+" €"),$("#total").text(t.total+" €")}})})})});